<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn to Code - Logic Builder</title>
    <style>
        :root {
            --bg-color: #f9fafb;
            --card-bg: #ffffff;
            --primary: #2563eb;
            --primary-hover: #1d4ed8;
            --text-main: #111827;
            --text-sec: #6b7280;
            --success: #059669;
            --error: #dc2626;
            --border-color: #e5e7eb;
            --focus-ring: rgba(37, 99, 235, 0.2);
        }
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
            -webkit-font-smoothing: antialiased;
        }

        header {
            padding: 16px 24px;
            display: flex;
            align-items: center;
            gap: 24px;
            background: var(--card-bg);
            border-bottom: 1px solid var(--border-color);
            z-index: 100;
        }
        .back-btn {
            background: none;
            border: none;
            color: var(--text-sec);
            padding: 8px;
            margin: -8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            transition: color 0.2s;
            border-radius: 4px;
        }
        .back-btn:hover {
            color: var(--text-main);
            background-color: #f3f4f6;
        }
        .progress-container {
            flex: 1;
            height: 4px;
            background-color: #e5e7eb;
            border-radius: 2px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background-color: var(--primary);
            width: 60%; /* Further along */
            border-radius: 2px;
            transition: width 0.4s ease;
        }

        main {
            flex: 1;
            padding: 32px 24px;
            overflow-y: auto;
            max-width: 640px;
            margin: 0 auto;
            width: 100%;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
        }

        h1 {
            font-size: 24px;
            margin: 0 0 12px 0;
            font-weight: 600;
            color: var(--text-main);
            letter-spacing: -0.025em;
        }
        p {
            line-height: 1.6;
            color: var(--text-sec);
            margin: 0 0 24px 0;
            font-size: 16px;
        }

        /* Logic Builder Specific Styles */
        .builder-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .drop-zone-label {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-sec);
            margin-bottom: 8px;
            font-weight: 600;
        }

        .solution-area {
            background-color: #1f2937;
            border-radius: 8px;
            min-height: 180px;
            padding: 16px;
            display: flex;
            flex-direction: column;
            gap: 2px;
            border: 1px solid #374151;
            transition: all 0.2s;
        }
        
        .solution-area.empty {
            display: flex;
            align-items: center;
            justify-content: center;
            color: #4b5563;
            font-style: italic;
            font-size: 14px;
        }
        .solution-area.empty::after {
            content: "Tap lines below to add them here";
        }

        .source-area {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .code-line {
            padding: 12px 16px;
            border-radius: 6px;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
            user-select: none;
            display: flex;
            align-items: center;
        }

        /* State: In Source Bank */
        .source-area .code-line {
            background-color: white;
            border: 1px solid var(--border-color);
            color: var(--text-main);
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }
        .source-area .code-line:hover {
            border-color: #d1d5db;
            background-color: #f9fafb;
        }

        /* State: In Solution (Dark Mode style) */
        .solution-area .code-line {
            background-color: transparent;
            color: #e5e7eb;
            padding: 8px 0;
            border: none;
            border-radius: 0;
        }
        .solution-area .code-line:hover {
            background-color: rgba(255,255,255,0.05);
        }

        /* Syntax Highlighting Simulation */
        .kwd { color: #c678dd; } /* Keyword */
        .str { color: #98c379; } /* String */
        .num { color: #d19a66; } /* Number */
        .op { color: #56b6c2; }  /* Operator */

        /* Indentation classes */
        .indent-0 { margin-left: 0; }
        .indent-1 { margin-left: 24px; }

        footer {
            padding: 16px 24px;
            background: var(--card-bg);
            border-top: 1px solid var(--border-color);
            margin-top: auto;
            z-index: 100;
            padding-bottom: max(16px, env(safe-area-inset-bottom));
        }
        .footer-content {
            max-width: 640px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .check-btn {
            width: 100%;
            padding: 12px 20px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .check-btn:hover:not(:disabled) {
            background-color: var(--primary-hover);
        }
        .check-btn:disabled {
            background-color: #e5e7eb;
            color: #9ca3af;
            cursor: not-allowed;
        }
        .feedback {
            text-align: center;
            font-weight: 500;
            font-size: 14px;
            display: none;
        }
        .feedback.visible {
            display: block;
        }
        .feedback.success { color: var(--success); }
        .feedback.error { color: var(--error); }

    </style>
</head>
<body>
    <header>
        <button class="back-btn" onclick="window.location.href='one.html'">‚Üê</button>
        <div class="progress-container">
            <div class="progress-bar"></div>
        </div>
    </header>

    <main>
        <h1>Logic Builder</h1>
        <p>Construct a program that checks if a person is an adult (age 18 or older). Tap the lines to arrange them in the correct order.</p>
        
        <div class="builder-area">
            <div>
                <div class="drop-zone-label">Your Solution</div>
                <div class="solution-area empty" id="solutionArea"></div>
            </div>

            <div>
                <div class="drop-zone-label">Available Lines</div>
                <div class="source-area" id="sourceArea">
                    <!-- Lines will be injected here -->
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="feedback" id="feedback"></div>
            <button class="check-btn" id="checkBtn" onclick="checkAnswer()" disabled>Run Code</button>
        </div>
    </footer>

    <script>
        // Data for the puzzle
        const puzzleLines = [
            { id: 1, html: '<span class="kwd">if</span> age >= <span class="num">18</span>:', indent: 0 },
            { id: 2, html: '<span class="kwd">print</span>(<span class="str">"Adult"</span>)', indent: 1 },
            { id: 3, html: 'age = <span class="num">20</span>', indent: 0 },
            { id: 4, html: '<span class="kwd">else</span>:', indent: 0 },
            { id: 5, html: '<span class="kwd">print</span>(<span class="str">"Minor"</span>)', indent: 1 }
        ];

        // Correct order of IDs
        const correctOrder = [3, 1, 2, 4, 5];

        let currentSolution = [];
        
        function init() {
            const sourceArea = document.getElementById('sourceArea');
            
            // Shuffle lines for the source area
            const shuffled = [...puzzleLines].sort(() => Math.random() - 0.5);
            
            shuffled.forEach(line => {
                const el = createLineElement(line);
                sourceArea.appendChild(el);
            });
        }

        function createLineElement(lineData) {
            const div = document.createElement('div');
            div.className = 'code-line';
            div.innerHTML = lineData.html;
            div.dataset.id = lineData.id;
            div.dataset.indent = lineData.indent;
            
            div.onclick = () => toggleLine(div, lineData);
            
            return div;
        }

        function toggleLine(element, data) {
            const sourceArea = document.getElementById('sourceArea');
            const solutionArea = document.getElementById('solutionArea');
            const checkBtn = document.getElementById('checkBtn');
            const feedback = document.getElementById('feedback');

            // Clear feedback when modifying
            feedback.className = 'feedback';
            feedback.textContent = '';

            if (element.parentElement === sourceArea) {
                // Move to Solution
                solutionArea.appendChild(element);
                currentSolution.push(data.id);
                
                // Apply indentation visual
                element.classList.remove('indent-0', 'indent-1');
                element.classList.add(`indent-${data.indent}`);
                
                if (solutionArea.classList.contains('empty')) {
                    solutionArea.classList.remove('empty');
                }
            } else {
                // Move back to Source
                sourceArea.appendChild(element);
                currentSolution = currentSolution.filter(id => id !== data.id);
                
                // Remove indentation visual for source list
                element.classList.remove('indent-0', 'indent-1');
                
                if (solutionArea.children.length === 0) {
                    solutionArea.classList.add('empty');
                }
            }

            // Enable button if all lines are used
            checkBtn.disabled = currentSolution.length !== puzzleLines.length;
            if (checkBtn.disabled) {
                checkBtn.textContent = "Run Code";
            }
        }

        function checkAnswer() {
            const feedback = document.getElementById('feedback');
            const btn = document.getElementById('checkBtn');
            
            // Check if order matches
            const isCorrect = currentSolution.every((val, index) => val === correctOrder[index]);

            if (isCorrect) {
                feedback.textContent = "Success! Output: Adult";
                feedback.className = "feedback success visible";
                btn.textContent = "Next Lesson";
                // Confetti could go here
            } else {
                feedback.textContent = "Syntax Error: The logic seems incorrect. Check the order.";
                feedback.className = "feedback error visible";
                btn.textContent = "Try Again";
            }
        }

        // Initialize
        init();
    </script>
</body>
</html>